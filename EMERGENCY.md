# üÜò –≠–∫—Å—Ç—Ä–µ–Ω–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã Ugodo

## üö® –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Å–∏—Ç—É–∞—Ü–∏–∏

### –°–∞–π—Ç –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
```bash
# –ë—ã—Å—Ç—Ä–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
./monitor.sh

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Ä—Ç–æ–≤
curl -I http://localhost:8000
curl -I http://localhost:9000

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
pm2 restart all
docker compose restart
```

### Git –ø—Ä–æ–±–ª–µ–º—ã ("divergent branches")
```bash
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–µ—à–µ–Ω–∏–µ
./fix-git-divergent.sh auto

# –ò–ª–∏ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
git fetch origin main && git reset --hard origin/main
```

### –û—Ç–∫–∞—Ç –∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≤–µ—Ä—Å–∏–∏
```bash
# –û—Ç–∫–∞—Ç –∫–æ–¥–∞
git log --oneline -5  # –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∫–æ–º–º–∏—Ç—ã
git checkout HEAD~1   # –û—Ç–∫–∞—Ç –Ω–∞ 1 –∫–æ–º–º–∏—Ç

# –ë—ã—Å—Ç—Ä–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ
./deploy.sh auto
```

### –ü–æ–ª–Ω—ã–π —Å–±—Ä–æ—Å —Å–∏—Å—Ç–µ–º—ã
```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ
pm2 stop all
docker compose down

# –û—á–∏—Å—Ç–∏—Ç—å Docker
docker system prune -af
docker volume prune -f

# –û—á–∏—Å—Ç–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
rm -rf node_modules medusa/node_modules
yarn install
cd medusa && yarn install && cd ..

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –∑–∞–Ω–æ–≤–æ
./deploy.sh auto
```

## üîß –ë—ã—Å—Ç—Ä—ã–µ —Ñ–∏–∫—Å—ã

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å PostgreSQL
sudo systemctl status postgresql
sudo systemctl restart postgresql

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Redis
redis-cli ping
sudo systemctl restart redis
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å –ø–∞–º—è—Ç—å—é
```bash
# –û—Å–≤–æ–±–æ–¥–∏—Ç—å –ø–∞–º—è—Ç—å
pm2 restart all --update-env
docker compose restart

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
free -h
df -h
```

### –ü–æ—Ä—Ç—ã –∑–∞–Ω—è—Ç—ã
```bash
# –ù–∞–π—Ç–∏ –ø—Ä–æ—Ü–µ—Å—Å—ã –Ω–∞ –ø–æ—Ä—Ç–∞—Ö
sudo lsof -i :8000
sudo lsof -i :9000

# –£–±–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å—ã
sudo fuser -k 8000/tcp
sudo fuser -k 9000/tcp
```

## üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã —ç–∫—Å—Ç—Ä–µ–Ω–Ω–æ–π –ø–æ–º–æ—â–∏

- **–ö–æ–º–∞–Ω–¥–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏**: admin@ugodo.ru
- **Slack**: #ugodo-emergency
- **–¢–µ–ª–µ—Ñ–æ–Ω**: +7-XXX-XXX-XXXX

## üìã –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–µ–π—Å—Ç–≤–∏–π –ø—Ä–∏ —Å–±–æ–µ

1. **–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞**: `./monitor.sh`
2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤**: `pm2 logs` –∏–ª–∏ `docker compose logs`
3. **–ü—Ä–æ—Å—Ç–æ–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫**: `pm2 restart all`
4. **–û—Ç–∫–∞—Ç –≤–µ—Ä—Å–∏–∏**: `git checkout HEAD~1 && ./deploy.sh auto`
5. **–ü–æ–ª–Ω—ã–π —Å–±—Ä–æ—Å**: —Å–º. "–ü–æ–ª–Ω—ã–π —Å–±—Ä–æ—Å —Å–∏—Å—Ç–µ–º—ã" –≤—ã—à–µ
6. **–û–±—Ä–∞—â–µ–Ω–∏–µ –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É** –µ—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –Ω–µ —Ä–µ—à–µ–Ω–∞

---
üìñ **–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: [DEPLOY_GUIDE.md](./DEPLOY_GUIDE.md) 