## Задача: Настройка и документирование проекта Ugodo
- **Статус**: В процессе
- **Описание**: Изучение проекта, настройка базовой документации (changelog, tasktracker, project.md), анализ технологий и формирование первоначального роадмапа.
- **Шаги выполнения**:
  - [x] Создание файла `/docs/changelog.md`
  - [x] Создание файла `/docs/tasktracker.md`
  - [x] Создание файла `/docs/project.md`
  - [x] Изучение документации по heroUI и MedusaJS
  - [x] Анализ структуры проекта и ключевых файлов (`package.json`, `src/`, `medusa/`)
  - [x] Первичное заполнение `/docs/project.md` (Архитектура, Технологический стек)
  - [x] Формирование роадмапа в `/docs/tasktracker.md` (добавлены новые задачи на основе анализа)
  - [ ] Добавление стандартных заголовков с метаданными к файлам
  - [ ] Обновление навигации для новых страниц (если требуется)
  - [x] Реализация логики для страницы "Бестселлеры"
- **Зависимости**: Нет

## Задача: Улучшение мобильного интерфейса
- **Статус**: Завершена
- **Описание**: Убрать отступы слева и справа у блока `.content-container` на мобильных устройствах. Исправить ссылки в нижнем мобильном меню.
- **Шаги выполнения**:
  - [x] Модификация стилей для `.content-container` в `src/styles/globals.css`
  - [x] Исправление ссылки "Каталог" в `MobileBottomNav` (`src/modules/mobile/components/index.tsx`) с `/categories` на `/store`.
- **Зависимости**: Нет

## Задача: Создание страниц каталога по аналогии со /store
- **Статус**: Завершена
- **Описание**: Создать страницы `/brands`, `/new-arrivals`, `/bestsellers` с функциональностью, аналогичной `/store`, включая фильтрацию и пагинацию. Логика для "Бестселлеров" реализована через фильтрацию по тегу.
- **Шаги выполнения**:
  - [x] Создание страницы `/brands` (`src/app/[countryCode]/(main)/brands/page.tsx`) для отображения списка коллекций (брендов).
  - [x] Адаптация страницы отображения коллекции (`src/app/[countryCode]/(main)/collections/[handle]/page.tsx`) для использования фильтров.
  - [x] Обновление `CollectionTemplate` (`src/modules/collections/templates/index.tsx`) для приема `searchParams`, `filterData` и использования `ProductFilters`.
  - [x] Создание компонента `CollectionProductsDisplay` (`src/modules/collections/components/collection-products-display/index.tsx`) для отображения продуктов коллекции с фильтрацией и пагинацией.
  - [x] Создание страницы `/new-arrivals` (`src/app/[countryCode]/(main)/new-arrivals/page.tsx`) с сортировкой по умолчанию по дате создания.
  - [x] Создание страницы `/bestsellers` (`src/app/[countryCode]/(main)/bestsellers/page.tsx`) (логика реализована через фильтрацию по тегу 'bestseller').
- **Зависимости**: Задача "Улучшение мобильного интерфейса" (исправление навигации)

## Задача: Реализация логики для страницы "Бестселлеры"
- **Статус**: Завершена
- **Описание**: Доработана страница `/bestsellers`. Реализована фильтрация по тегу "bestseller" на фронтенде. Для более сложной логики (например, на основе реальных продаж) может потребоваться доработка бэкенда, что может быть выделено в отдельную задачу.
- **Шаги выполнения**:
  - [x] Определить критерии "бестселлера" (выбран вариант с фильтрацией по тегу 'bestseller').
  - [x] Исследовать возможности MedusaJS API (стандартные опции сортировки не включают "популярность" или "продажи").
  - [x] Обновить функцию `fetchBestsellersProductData` на странице `/bestsellers/page.tsx` для фильтрации по тегу 'bestseller' по умолчанию.
- **Зависимости**: Задача "Создание страниц каталога по аналогии со /store"

## Задача: Актуализация навигации
- **Статус**: Завершена
- **Описание**: Убедиться, что все созданные страницы (`/brands`, `/new-arrivals`, `/bestsellers`) доступны через основную навигацию сайта. Десктопная навигация (`src/modules/layout/templates/nav/index.tsx`) уже содержала необходимые ссылки. Мобильная навигация (`MobileNav` в `src/modules/mobile/components/index.tsx`) обновлена.
- **Шаги выполнения**:
  - [x] Проанализировать компоненты навигации (`Nav`, `MobileNav`, `MobileBottomNav`).
  - [x] Добавить ссылки на новые страницы в `MobileNav`.
  - [x] Протестировать корректность работы ссылок (предполагается ручное тестирование).
- **Зависимости**: Задача "Создание страниц каталога по аналогии со /store"

## Задача: Документирование существующего кода
- **Статус**: В процессе
- **Описание**: Добавить стандартные заголовки с метаданными (согласно `required_instructions`) ко всем существующим файлам `.tsx`, `.ts`, `.jsx`, `.js` в директориях `src/` и `medusa/src/`.
- **Шаги выполнения**:
  - [ ] Разработать скрипт или план для систематического добавления заголовков.
  - [x] Поэтапно добавить заголовки к файлам страниц: `brands/page.tsx`, `new-arrivals/page.tsx`, `bestsellers/page.tsx`.
  - [x] Поэтапно добавить заголовки к файлам компонентов: `mobile/components/index.tsx`, `collections/templates/index.tsx`, `collections/components/collection-products-display/index.tsx`.
  - [x] Поэтапно добавить заголовок к файлу страницы коллекции: `collections/[handle]/page.tsx`.
  - [x] Исправлена типизация в `listProductTypes` (`src/lib/data/product-filters.ts`) для соответствия API.
  - [ ] Продолжить добавление заголовков к остальным файлам проекта.
- **Зависимости**: Нет

## Задача: Уточнение использования UI-библиотеки
- **Статус**: Завершена
- **Описание**: В `package.json` указана зависимость `@medusajs/ui`. Изначально предполагалось использование HeroUI, но анализ импортов показал активное использование `@medusajs/ui` и отсутствие импортов `@heroui/react`. Документация (`/docs/project.md`) обновлена.
- **Шаги выполнения**:
  - [x] Провести поиск по коду на предмет импортов из `@heroui/react` и `@medusajs/ui`.
  - [x] Определить основную используемую UI-библиотеку (@medusajs/ui).
  - [x] Обновить раздел "Фронтенд" и "Технологический стек" в `/docs/project.md`.
- **Зависимости**: Нет

## Задача: Улучшение главной страницы
- **Статус**: В процессе
- **Описание**: Сделать главную страницу более информативной и привлекательной, добавив динамические блоки согласно утвержденной структуре.
- **Шаги выполнения**:
  - [x] Проанализировать главные страницы конкурентов (включая goldapple.ru) и успешных e-commerce проектов.
  - [x] Разработать дизайн/макет для новых блоков (баннеры, карусели акций, популярные категории, блок новинок, блок рекомендуемых товаров/брендов) и описать структуру в `docs/project.md`.
  - [x] **Блок 1: Hero Banner**
    - [x] Заменить компонент `HeroBanner` (`src/modules/layout/components/hero-banner/index.tsx`) на `Hero` (`src/modules/home/components/hero/index.tsx`).
    - [x] Удалить старый компонент `HeroBanner`.
  - [x] **Блок 2: Популярные категории**
    - [x] Создать компонент `PopularCategories` (`src/modules/home/components/popular-categories/index.tsx`) для отображения популярных категорий.
    - [x] Реализовать получение данных о категориях (верхнеуровневые, активные, не внутренние) на главной странице.
    - [x] Интегрировать компонент `PopularCategories` на главную страницу.
  - [ ] **Блок 3: Новинки**
    - [x] Создать компонент для отображения карусели/сетки новых товаров (используется существующий `ProductSection`).
    - [x] Реализовать получение данных о новинках (последние добавленные товары) (уже было на главной странице).
    - [x] Интегрировать компонент на главную страницу (уже было интегрировано).
  - [ ] **Блок 4: Хиты продаж / Рекомендованные товары**
    - [x] Создать компонент для отображения хитов продаж или рекомендованных товаров (используется существующий `ProductSection`).
    - [x] Определить логику получения данных (по тегу "bestseller" с получением ID тега через `getTagByValue`).
    - [x] Интегрировать компонент на главную страницу (обновлена логика получения данных для существующего блока).
    - [ ] *Примечание: Возможна проблема с типизацией `tags` в `StoreProductParams` от `@medusajs/types`. Использовано `as any` как временное решение. Требует дополнительного изучения.*
  - [ ] **Блок 5: Специальные акции / Промо-блоки**
    - [x] Создать компонент для отображения специальных предложений или промо-баннеров (используется существующий `PromotionsSlider`).
    - [x] Интегрировать компонент на главную страницу (уже был интегрирован, использует статические данные).
  - [ ] **Блок 6: Бренды**
    - [x] Создать компонент `FeaturedBrands` (`src/modules/home/components/featured-brands/index.tsx`) для отображения логотипов или карточек ключевых брендов.
    - [x] Реализовать получение данных о коллекциях (брендах) на главной странице.
    - [x] Интегрировать компонент `FeaturedBrands` на главную страницу.
  - [ ] **Блок 7: Контентный блок (О нас / Преимущества)**
    - [x] Удалить компонент `InfoBlock` (`src/modules/home/components/info-block/index.tsx`) с главной страницы.
    - [x] Удалить файл компонента `InfoBlock`.
  - [ ] **Блок 8: Подписка на рассылку**
    - [ ] Создать или интегрировать существующий компонент подписки на email-рассылку.
    - [ ] Интегрировать компонент на главную страницу.
- **Зависимости**: Возможно, "Интеграция с системой управления контентом (CMS)" для баннеров и контентных блоков.

## Задача: Реализация списка желаний (Wishlist)
- **Статус**: Не начата
- **Описание**: Предоставить пользователям возможность добавлять товары в список желаний для последующего просмотра или покупки.
- **Шаги выполнения**:
  - [ ] Исследовать существующие плагины MedusaJS для списка желаний или определить способ кастомной реализации.
  - [ ] Разработать модель данных для списка желаний (если кастомная реализация).
  - [ ] Создать API эндпоинты для добавления/удаления/получения товаров из списка желаний.
  - [ ] Интегрировать кнопки "Добавить в избранное" на карточках товаров и на странице товара.
  - [ ] Создать страницу "Список желаний" в личном кабинете пользователя.
  - [ ] Обеспечить сохранение списка желаний для зарегистрированных пользователей.
- **Зависимости**: Функционал личного кабинета пользователя.

## Задача: Расширенная система отзывов о товарах
- **Статус**: Не начата
- **Описание**: Улучшить текущую систему отзывов, добавив рейтинги, возможность прикреплять фото, сортировку и фильтрацию отзывов.
- **Шаги выполнения**:
  - [ ] Оценить возможности существующих плагинов (`@appateam/medusa-plugin-product-reviews`, `medusa-plugin-reviews`) на предмет поддержки расширенного функционала.
  - [ ] Если плагины не подходят, спланировать доработку или кастомную реализацию.
  - [ ] Добавить поле для числового рейтинга (1-5 звезд) к отзывам.
  - [ ] Реализовать загрузку изображений к отзывам.
  - [ ] Добавить возможность модерации отзывов в админ-панели Medusa.
  - [ ] Отображать средний рейтинг на карточке товара и странице товара.
  - [ ] Реализовать сортировку и фильтрацию отзывов на странице товара.
- **Зависимости**: Базовая система отзывов.

## Задача: Интеграция с платежными системами
- **Статус**: Не начата
- **Описание**: Настроить и интегрировать одну или несколько платежных систем для приема онлайн-оплат.
- **Шаги выполнения**:
  - [ ] Выбрать целевые платежные системы (например, Stripe, YooKassa, локальные эквайринги).
  - [ ] Изучить и установить соответствующие плагины MedusaJS для выбранных систем.
  - [ ] Настроить плагины с тестовыми и боевыми ключами.
  - [ ] Протестировать процесс оплаты на фронтенде.
  - [ ] Обеспечить корректное обновление статусов заказов после оплаты.
- **Зависимости**: Нет.

## Задача: Настройка системы уведомлений (Email)
- **Статус**: Не начата
- **Описание**: Настроить отправку email-уведомлений пользователям и администраторам о ключевых событиях (регистрация, заказ создан, заказ отправлен и т.д.).
- **Шаги выполнения**:
  - [ ] Выбрать сервис для отправки email (например, SendGrid, Mailgun, или локальный SMTP).
  - [ ] Установить и настроить соответствующий плагин уведомлений в MedusaJS (например, `medusa-plugin-sendgrid`).
  - [ ] Кастомизировать шаблоны email-уведомлений.
  - [ ] Протестировать отправку уведомлений для всех ключевых событий.
- **Зависимости**: Нет.

## Задача: Улучшение страницы товара
- **Статус**: Не начата
- **Описание**: Сделать страницу товара более информативной и удобной для пользователя. Часть улучшений вынесена в отдельную детализированную задачу "Приведение страницы товара в надлежащий вид". Эта задача фокусируется на оставшихся аспектах.
- **Шаги выполнения**:
  - [ ] Проанализировать страницы товаров у конкурентов (общий анализ).
  - [ ] Улучшить галерею изображений товара (зум основной картинки, возможность добавления видео к товару).
  - [ ] Реализовать блок "С этим товаром покупают" или "Похожие товары".
  - [ ] Отображать информацию о наличии вариантов товара и их доступности (если еще не полностью реализовано).
  - [ ] Улучшить отображение информации о скидках и программе лояльности на странице товара (если применимо).
- **Зависимости**: "Расширенная система отзывов о товарах", "Базовая программа лояльности", "Приведение страницы товара в надлежащий вид".

## Задача: Приведение страницы товара в надлежащий вид
- **Статус**: В процессе
- **Описание**: Улучшить внешний вид и функциональность страницы с подробной информацией о товаре, включая отображение характеристик, стилизацию табов, адаптацию для мобильных устройств и исправление позиционирования элементов.
- **Шаги выполнения**:
  - [x] Вывести характеристики товара из метаданных MedusaJS на страницу товара (функционал присутствует в `src/modules/products/components/product-info/index.tsx`, возможно, потребуется стилизация и проверка полноты данных).
  - [x] **Общие/Десктоп:** Заменить цвет подчеркивания у табов на странице товара на `#BAFF29`.
  - [x] **Общие/Десктоп:** Проанализировать и расширить содержимое табов.
    - [x] Создать/обновить таб "Описание и характеристики" (объединить описание, артикул, добавить вес, размеры, материал, страна происхождения из `product` объекта).
    - [x] Создать/обновить таб "Отзывы" (интегрировать существующий компонент `ProductReviews`).
    - [x] Создать/обновить таб "Доставка и возврат" (расширить информацией об оплате, возможно, переименовать в "Доставка, оплата и возврат").
    - [x] Проверить и при необходимости доработать таб "О бренде" (добавлена ссылка, логотип и описание из метаданных).
  - [ ] **Мобильная версия:** Галерея картинок:
    - [x] Адаптировать макет: основное изображение по центру и на всю ширину, миниатюры горизонтально снизу (для экранов < 768px).
    - [x] Реализовать открытие изображений на весь экран (в модальном окне с Embla каруселью и навигацией).
  - [x] **Мобильная версия:** Добавить отступы слева и справа (`px-4`) для всего контента страницы товара.
- **Зависимости**: Существующая страница товара, компонент табов, данные о товаре из MedusaJS, глобальные стили `content-container`.

## Задача: Базовая программа лояльности
- **Статус**: Не начата
- **Описание**: Реализовать простую программу лояльности (например, накопительные скидки или бонусные баллы).
- **Шаги выполнения**:
  - [ ] Исследовать возможности MedusaJS и существующих плагинов для программ лояльности.
  - [ ] Определить механику программы (например, начисление баллов за покупки, скидка от суммы заказов).
  - [ ] Если плагинов нет, спланировать кастомную разработку (модели, сервисы, API).
  - [ ] Интегрировать отображение информации о программе лояльности в личном кабинете и на странице оформления заказа.
- **Зависимости**: Личный кабинет пользователя.

## Задача: Улучшение поиска товаров
- **Статус**: Не начата
- **Описание**: Повысить удобство и эффективность поиска по сайту.
- **Шаги выполнения**:
  - [ ] Реализовать живой поиск с подсказками (autocomplete) при вводе в поисковую строку.
  - [ ] Улучшить релевантность результатов поиска (возможно, через конфигурацию MeiliSearch).
  - [ ] Добавить возможность фильтрации и сортировки на странице результатов поиска.
  - [ ] Рассмотреть обработку опечаток и синонимов.
- **Зависимости**: Интеграция с MeiliSearch.

## Задача: Создание контентных разделов (Блог/Статьи)
- **Статус**: Не начата
- **Описание**: Добавить на сайт раздел с блогом или статьями для улучшения SEO и вовлечения пользователей.
- **Шаги выполнения**:
  - [ ] Выбрать способ управления контентом (простой модуль в Medusa, headless CMS типа Strapi/Contentful, или markdown-файлы в Next.js проекте).
  - [ ] Разработать структуру данных для статей (заголовок, контент, автор, дата, категории, теги).
  - [ ] Создать страницы для списка статей и для отдельной статьи.
  - [ ] Реализовать базовый WYSIWYG-редактор или поддержку Markdown для создания контента.
- **Зависимости**: Нет.

## Задача: Исправление ошибок после развертывания на сервере
- **Статус**: В процессе
- **Описание**: Приложение выдает множественные ошибки на стороне сервера и клиента после развертывания. Необходимо идентифицировать и устранить причины.
- **Шаги выполнения**:
  - [ ] Проанализировать ошибку "Unauthorized" в `customer.ts` (требует проверки конфигурации сервера/CORS)
  - [-] Исправить использование `params.countryCode` в `layout.tsx` (причина не ясна, возможно, побочный эффект, проверяем после других исправлений)
  - [x] Устранить ошибку "Unrecognized fields" в `page.tsx`
  - [x] Решить проблему Hydration Mismatch (`data-mode="light"`)
  - [x] Исправить ошибку "Event handlers cannot be passed to Client Component props"
  - [ ] Проверить корректность работы JWT токенов и CORS настроек (связано с первым пунктом)
  - [ ] Протестировать приложение после исправлений
- **Зависимости**: - 